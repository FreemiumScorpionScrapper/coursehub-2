language: node_js
node_js:
- '10'
sudo: true
dist: trusty
branches:
  only:
  - master
before_script:
- export CHROME_BIN=/usr/bin/google-chrome
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- sudo apt-get update
- sudo apt-get install -y libappindicator1 fonts-liberation
- wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
- sudo dpkg -i google-chrome*.deb
- cd coursehub-app
- curl https://coursehubapi.herokuapp.com/api/v1.0/
- npm install
- npm install -g @angular/cli
script:
- ng e2e coursehub-app
after_success:
- cd ../
- git reset --hard
- git clean -fd
- git checkout master
- cd coursehub-app/
- sh build.sh
- cd ../
deploy:
- provider: heroku
  api_key:
    secure: p1oZCERuCXNvqHW8POc9dFwsjnGPbLgZi8hL9BO+RO/A/12sLBJ7A+kbgPMwJwwgkswH8TrKl5xhxc3CRl8ejI7bDpPmPHZbl4zmzsYq9ltfDcfVT4YMuRettI9SGPE9DOcREXswvR/Q0gGuYdKV649AMagqsBxt1qSbpBieXQ8ojCQ16stxfoa8OV7EyW7pDh/hP/6njOguuIvQuF9cP/J0NxlS2J0XV10A2IMW0JqwFAmNgDkyf/DRjZ5v7KR2LPRENUJe2Uw4e8okJjcEM4+ddQL5Rfc0LrjieOX1MENR2RGx3mewXyv0nEYqBAw/UEzW8Y9jOMEWusF5bUad0oFQpbt8/t6YosbyOVFyaR61aJYDJQoWFiFZ54PiXyFOlKBgNEVUL785po+vVyDTWdNoA3xSDL6yzwNoMnXhYFz4qCWueOXica4unjVJRQNRfU389MSL9zENLfchgg2XzRuTDvxIFwquMkGFndTu+SqZ7VHuGEJOuPhJg5C1XvW3NtdEx+UN3hbIisM8ptp5PtRFDPiJ77ALfwpY5Kvb0uqy0UziecW2+m6gUvfcMQIUr26m5bGDevRTTRCsOgZsBbERBKgrklavF+7rjLF3a1WY/mb4pe4XKpCgSu+sFhC0QcQ18PrVL/E1tufivORT4WgQ4QzccpGjFO4bAKZVNhQ=
  app: coursehubapi
- provider: pages
  skip-cleanup: true
  github-token:
    secure: wrt5gUbm8YFGxZlts3mpzrYNYNZ5DBj0c1T9H2TgY1xRIN/WddgItI/6RNHBl4s4lm7c9q7gBmW8MLdGX497GhJElMNFlFo2nxBmfbHRWEkp/vbbFTun2FwPS4BJhdUiSyqYD1sPaHOxLEsm0v956T9WX2pzR0jOhLbbsIvYTV5O0D07woy5p6KTzS/A48Vye84l0a7RaY2lSI8EAHu3BHHCR0YF2h8wmkOJaAxDwSg06XmpI5YdFuFK643Px0WaDSXLVnMdBFA9JqNR41plNorLcFLJYhmZg2psPbfJt//DDTvBhE/pCDAdc4k6sWWhJKWhOZrMlmSjcmmaPYlHlaUoTJTRP8yegBbMEErNNJR01Q/lkT5UYXoGkvNhJuz2rT3oDMBlwnKCEELBy95igGKi3Dai+gXYAItqyS34zCNN+Y6d5TwuGdY15V5C7dyheII7FQXhpVWJ30CMHuHtxzkgBT00N1umtVT1D+Q7EWM3skkXideYEInY1Pfk26dFSLwijHss5skRn+yElDvqc+h5YjbYjfLZ3CZuoYdOGFaPyGURaSlYgdK+TnQFR40+qsCqGwNUl+X8N1zN5rvLUuN3hAq9CJ+gEArelEa50s9YGmWRPS+F1zjtMrBQji51KGIU7zfd4RlIk2oaBYrgHe+I3KXTqAFbFC0SR3BdRzE=    
  keep-history: true
  target-branch: master
  local-dir: coursehub-app/dist
  repo: tash-had/coursehub-app
on:
  repo: csc301-fall-2018/project-team-19
  branch: master
