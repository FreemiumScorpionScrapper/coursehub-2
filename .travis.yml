language: node_js
node_js:
- '10'
sudo: true
dist: trusty
branches:
  only:
  - master
before_script:
- export CHROME_BIN=/usr/bin/google-chrome
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- sudo apt-get update
- sudo apt-get install -y libappindicator1 fonts-liberation
- wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
- sudo dpkg -i google-chrome*.deb
- cd coursehub-app
- curl https://coursehubapi.herokuapp.com/api/v1.0/
- npm install
- npm install -g @angular/cli
script:
- ng e2e coursehub-app
deploy:
  provider: heroku
  api_key:
    secure: C5oNrVVIadyU+taiBnb9Nx/3h8iUauWIMMF6saJrhl3uNgZ8vzLdI6RFR293m+tI2BaYETVSX09qMxJ8IzTzOaWRWRELpVHsHuoPnbxV3g+tD3UMoKWUFvy3cQZjgxNqZa+kS88gR+4oByEgIh+dscBTnmpjkJpf5bb7sZndq6s0e/H5ZbCr1uo6DRo3Jpc9bx7JoboPAtuuiRHCzf/q1im57lL8238c9hUklynVvkrd07caqXzCdSJa6fTXbj51dx9CnPE6lEsQ+EqxHJW+vS27Vi+ZVKmMf4fUKUvx0JRNP4PNSVldv8vDoLDZwy4wr/algBMcDTJRKYJc6FOnFivfkgnbDXvYPIbGJbNwz3+GYtyNYl7yRe7cA2jJRIQIWfj0utTkGcPnkm2zGIE8VyU8ncaqovW5RZ6DQyfuE6rtvy/WFpvm2ox8mWjuLkpRXSYrnXV2ZdhX8begkDY63rfkIuAQD511RXOySlSsqGbdKm6xGMWi7rSUxYjNZlauvqp1b7aCN4riGRjBCcvA7gw5CkK0pnnvs/P0MTuoEJdJ93yGep7NYivJgOvc4/4Rv61+NmIcx7IyIw4xPtKS5CQFP8XqnJsFLdPaK50WO5YuFSl8aHiEKuLXDH5psjmAMjLUpKufKZ2Kz3oWXKbIH9GRScD0Plo5C/Vyy6UXZ1o=
  on: master
