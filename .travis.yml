language: node_js
node_js:
- '10'
sudo: true
dist: trusty
branches:
  only:
  - master
before_script:
- export CHROME_BIN=/usr/bin/google-chrome
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- sudo apt-get update
- sudo apt-get install -y libappindicator1 fonts-liberation
- wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
- sudo dpkg -i google-chrome*.deb
- cd coursehub-app
- curl https://coursehubapi.herokuapp.com/api/v1.0/
- npm install
- npm install -g @angular/cli
script:
- ng e2e coursehub-app
after_success:
- cd ../
- git reset --hard
- git clean -fd
- git checkout master
- cd coursehub-app/
- sh build.sh
deploy:
- provider: heroku
  api_key:
    secure: p1oZCERuCXNvqHW8POc9dFwsjnGPbLgZi8hL9BO+RO/A/12sLBJ7A+kbgPMwJwwgkswH8TrKl5xhxc3CRl8ejI7bDpPmPHZbl4zmzsYq9ltfDcfVT4YMuRettI9SGPE9DOcREXswvR/Q0gGuYdKV649AMagqsBxt1qSbpBieXQ8ojCQ16stxfoa8OV7EyW7pDh/hP/6njOguuIvQuF9cP/J0NxlS2J0XV10A2IMW0JqwFAmNgDkyf/DRjZ5v7KR2LPRENUJe2Uw4e8okJjcEM4+ddQL5Rfc0LrjieOX1MENR2RGx3mewXyv0nEYqBAw/UEzW8Y9jOMEWusF5bUad0oFQpbt8/t6YosbyOVFyaR61aJYDJQoWFiFZ54PiXyFOlKBgNEVUL785po+vVyDTWdNoA3xSDL6yzwNoMnXhYFz4qCWueOXica4unjVJRQNRfU389MSL9zENLfchgg2XzRuTDvxIFwquMkGFndTu+SqZ7VHuGEJOuPhJg5C1XvW3NtdEx+UN3hbIisM8ptp5PtRFDPiJ77ALfwpY5Kvb0uqy0UziecW2+m6gUvfcMQIUr26m5bGDevRTTRCsOgZsBbERBKgrklavF+7rjLF3a1WY/mb4pe4XKpCgSu+sFhC0QcQ18PrVL/E1tufivORT4WgQ4QzccpGjFO4bAKZVNhQ=
  app: coursehubapi
- provider: pages
  skip-cleanup: true
  github-token:
    secure: Ws+sZdMrU1QQIwrM3QxjS+9DhneI/Me80WGg8mRHD4ijdcmC3ImgW8Z8h+ycKjIIhDBTt2ItwiNuBcCEoGb2z+DXw2A6KZUqGyuyipD368dSjkmvzxxm5KXy+FcgqD5uDmJWX25+HZPonn4/wzUtk4eciI2FFLfTwxsqxjJcbjOTDzwUnKMCyWZW15EU1gnHSLjF69/zn8K/ppb2RmaPrNZw5ewcmAr/AjF3TOymgPTJpAmkim74JUaaT6ulloDyQbZAe7W0jaUkJwhw7xWdAgsmRCXRD5sMevFR2UL42FeiXNxX/QsufY7VADQCnxWl6udOP4hy24yJptW/jdrfc0rqY/QyNPG86KlkDJUCIdpdVhetvMjAJmbIPotGAbFGmZ0GXj3acHyA6vUmdH0h5LAnu+CL2611Zh4GuMdbNuEFQZA9GBGNPtfHearKMzT/e/FGxZiJg11tUS2UoNCrVzN0MZJcNLKyK3ocHBWs26sqVSO9NwmjGQliMbHn11tNBmzRWceINh3OT6zI9gxxtyo9XizMVtQ4oivHwT7Hki3v3XIpGxbMYU9AVh7bYJF7f0Ij/Dae4I4wkNvZ5/V0/0Vak6+W75J3ttNePGBrnEt4VGt6AT1lsFlyCH5cvVsss9ZCV2xMER9VV5HcE3B+jMflitl8IhTRtTpf9AXBk/8=
  keep-history: true
  target-branch: master
  local-dir: coursehub-app/dist
  repo: tash-had/coursehub-app
on:
  repo: csc301-fall-2018/project-team-19
  branch: master
